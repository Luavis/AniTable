function Swipe(e,t){"use strict";function n(){d=y.children,b=d.length,d.length<2&&(t.continuous=!1),p.transitions&&t.continuous&&d.length<3&&(y.appendChild(d[0].cloneNode(!0)),y.appendChild(y.children[1].cloneNode(!0)),d=y.children),v=new Array(d.length),g=e.getBoundingClientRect().width||e.offsetWidth,y.style.width=d.length*g+"px";for(var n=d.length;n--;){var i=d[n];i.style.width=g+"px",i.setAttribute("data-index",n),p.transitions&&(i.style.left=n*-g+"px",o(n,w>n?-g:n>w?g:0,0))}t.continuous&&p.transitions&&(o(a(w-1),-g,0),o(a(w+1),g,0)),p.transitions||(y.style.left=w*-g+"px"),e.style.visibility="visible"}function i(){t.continuous?s(w-1):w&&s(w-1)}function r(){t.continuous?s(w+1):w<d.length-1&&s(w+1)}function a(e){return(d.length+e%d.length)%d.length}function s(e,n){if(w!=e){if(p.transitions){var i=Math.abs(w-e)/(w-e);if(t.continuous){var r=i;i=-v[a(e)]/g,i!==r&&(e=-i*d.length+e)}for(var s=Math.abs(w-e)-1;s--;)o(a((e>w?e:w)-s-1),g*i,0);e=a(e),o(w,g*i,n||S),o(e,0,n||S),t.continuous&&o(a(e-i),-(g*i),0)}else e=a(e),u(w*-g,e*-g,n||S);w=e,m(t.callback&&t.callback(w,d[w]))}}function o(e,t,n){l(e,t,n),v[e]=t}function l(e,t,n){var i=d[e],r=i&&i.style;r&&(r.webkitTransitionDuration=r.MozTransitionDuration=r.msTransitionDuration=r.OTransitionDuration=r.transitionDuration=n+"ms",r.webkitTransform="translate("+t+"px,0)"+"translateZ(0)",r.msTransform=r.MozTransform=r.OTransform="translateX("+t+"px)")}function u(e,n,i){if(!i)return y.style.left=n+"px",void 0;var r=+new Date,a=setInterval(function(){var s=+new Date-r;return s>i?(y.style.left=n+"px",A&&c(),t.transitionEnd&&t.transitionEnd.call(event,w,d[w]),clearInterval(a),void 0):(y.style.left=(n-e)*(Math.floor(100*(s/i))/100)+e+"px",void 0)},4)}function c(){x=setTimeout(r,A)}function h(){A=0,clearTimeout(x)}var f=function(){},m=function(e){setTimeout(e||f,0)},p={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(e){var t=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var n in t)if(void 0!==e.style[t[n]])return!0;return!1}(document.createElement("swipe"))};if(e){var d,v,g,b,y=e.children[0];t=t||{};var w=parseInt(t.startSlide,10)||0,S=t.speed||300;t.continuous=void 0!==t.continuous?t.continuous:!0;var x,C,A=t.auto||0,k={},E={},_={handleEvent:function(e){switch(e.type){case"touchstart":this.start(e);break;case"touchmove":this.move(e);break;case"touchend":m(this.end(e));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":m(this.transitionEnd(e));break;case"resize":m(n.call())}t.stopPropagation&&e.stopPropagation()},start:function(e){var t=e.touches[0];k={x:t.pageX,y:t.pageY,time:+new Date},C=void 0,E={},y.addEventListener("touchmove",this,!1),y.addEventListener("touchend",this,!1)},move:function(e){if(!(e.touches.length>1||e.scale&&1!==e.scale)){t.disableScroll&&e.preventDefault();var n=e.touches[0];E={x:n.pageX-k.x,y:n.pageY-k.y},"undefined"==typeof C&&(C=!!(C||Math.abs(E.x)<Math.abs(E.y))),C||(e.preventDefault(),h(),t.continuous?(l(a(w-1),E.x+v[a(w-1)],0),l(w,E.x+v[w],0),l(a(w+1),E.x+v[a(w+1)],0)):(E.x=E.x/(!w&&E.x>0||w==d.length-1&&E.x<0?Math.abs(E.x)/g+1:1),l(w-1,E.x+v[w-1],0),l(w,E.x+v[w],0),l(w+1,E.x+v[w+1],0)))}},end:function(){var e=+new Date-k.time,n=Number(e)<250&&Math.abs(E.x)>20||Math.abs(E.x)>g/2,i=!w&&E.x>0||w==d.length-1&&E.x<0;t.continuous&&(i=!1);var r=E.x<0;C||(n&&!i?(r?(t.continuous?(o(a(w-1),-g,0),o(a(w+2),g,0)):o(w-1,-g,0),o(w,v[w]-g,S),o(a(w+1),v[a(w+1)]-g,S),w=a(w+1)):(t.continuous?(o(a(w+1),g,0),o(a(w-2),-g,0)):o(w+1,g,0),o(w,v[w]+g,S),o(a(w-1),v[a(w-1)]+g,S),w=a(w-1)),t.callback&&t.callback(w,d[w])):t.continuous?(o(a(w-1),-g,S),o(w,0,S),o(a(w+1),g,S)):(o(w-1,-g,S),o(w,0,S),o(w+1,g,S))),y.removeEventListener("touchmove",_,!1),y.removeEventListener("touchend",_,!1)},transitionEnd:function(e){parseInt(e.target.getAttribute("data-index"),10)==w&&(A&&c(),t.transitionEnd&&t.transitionEnd.call(e,w,d[w]))}};return n(),A&&c(),p.addEventListener?(p.touch&&y.addEventListener("touchstart",_,!1),p.transitions&&(y.addEventListener("webkitTransitionEnd",_,!1),y.addEventListener("msTransitionEnd",_,!1),y.addEventListener("oTransitionEnd",_,!1),y.addEventListener("otransitionend",_,!1),y.addEventListener("transitionend",_,!1)),window.addEventListener("resize",_,!1)):window.onresize=function(){n()},{setup:function(){n()},slide:function(e,t){h(),s(e,t)},prev:function(){h(),i()},next:function(){h(),r()},getPos:function(){return w},getNumSlides:function(){return b},kill:function(){h(),y.style.width="auto",y.style.left=0;for(var e=d.length;e--;){var t=d[e];t.style.width="100%",t.style.left=0,p.transitions&&l(e,0,0)}p.addEventListener?(y.removeEventListener("touchstart",_,!1),y.removeEventListener("webkitTransitionEnd",_,!1),y.removeEventListener("msTransitionEnd",_,!1),y.removeEventListener("oTransitionEnd",_,!1),y.removeEventListener("otransitionend",_,!1),y.removeEventListener("transitionend",_,!1),window.removeEventListener("resize",_,!1)):window.onresize=null}}}}(window.jQuery||window.Zepto)&&function(e){e.fn.Swipe=function(t){return this.each(function(){e(this).data("Swipe",new Swipe(e(this)[0],t))})}}(window.jQuery||window.Zepto);